{% extends "base.html" %}
{% import "_macros.html" as macros %}

{% block content %}

<div class="btn-group btn-group-justified" role="group" aria-label="...">
  <div class="btn-group" role="group">
    <a class="btn btn-default"
       href="{{ url_for('ranking.all_rankings') }}">
        <span class="fa fa-arrow-left"></span>
        Historique des classements
    </a>
  </div>
</div>

<div class="panel panel-default panel-table">

    <div class="panel-heading">
        <h3 class="panel-title">Classement annuel</h3>
    </div>

    <div class="panel-body" style ="overflow-x:scroll">
        <table class="table table-striped table-bordered table-hover">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Pseudo</th>
                    <th>Points</th>
                    <th>Nombre de tournois</th>
                </tr>
            </thead>
            <tbody>
                {% for user in pagination.items %}
                    <tr>
                        <td>{{ (pagination.page - 1) * pagination.per_page + loop.index }}</td>
                        <td>
                            <a href= '{{ url_for("main.view_user", user_id = user.id, _external = True) }}'>
                                {{ user.username }}</a>
                        </td>
                        <td>
                            {% if user.annual_points is none %}
                                0
                            {% else %}
                                {{ user.annual_points }}
                            {% endif %}
                        </td>
                        <td>
                            {{ user.annual_participations.count() }}
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<div class="pagination">
    {{ macros.pagination_widget(pagination, '.annual_ranking') }}
</div>


{% endblock %}
