{% extends "base.html" %}
{% import "_macros.html" as macros %}

{% block content %}

<div class="btn-group btn-group-justified" role="group" aria-label="...">
  <div class="btn-group" role="group">
    <a class="btn btn-default"
       href="{{ url_for('ranking.all_rankings') }}">
        <span class="fa fa-arrow-left"></span>
        Historique des classements
    </a>
  </div>
  <div class="btn-group" role="group">
    <a class="btn btn-default"
       href="{{ url_for('tournament.view_tournament', tournament_id = tournament.id) }}">
        <span class="fa fa-trophy"></span>
        Page du tournoi
    </a>
  </div>
</div>

<div class="panel panel-default panel-table">

    <div class="panel-heading">
        <h3 class="panel-title">Classement annuel apr√®s le tournoi <a href= '{{ url_for("tournament.view_tournament", tournament_id = tournament.id, _external = True) }}'>
        {{ tournament.name }}</a></h3>
    </div>

    <div class="panel-body">
        <div class="table">
            <table class="table table-striped table-bordered table-hover">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Pseudo</th>
                        <th>Points</th>
                        <th>Nombre de tournois</th>
                    </tr>
                </thead>
                <tbody>
                    {% for user in pagination.items %}
                        <tr>
                            <td>{{ (pagination.page - 1) * pagination.per_page + loop.index }}</td>
                            <td>
                                <a href= '{{ url_for("main.view_user", user_id = user.id, _external = True) }}'>
                                    {{ user.username }}</a>
                            </td>
                            <td>
                                {% if user.annual_points is none %}
                                    0
                                {% else %}
                                    {{ user.annual_points }}
                                {% endif %}
                            </td>
                            <td>
                                {{ user.annual_number_tournaments }}
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

<div class="pagination">
    {{ macros.pagination_widget(pagination, '.historical_annual_ranking', tournament_id = tournament.id) }}
</div>


{% endblock %}
